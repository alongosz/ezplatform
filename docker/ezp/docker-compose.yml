version: '2'
services:
  ezp:
    build:
      context: ../../
      dockerfile: ./docker/ezp/Dockerfile
    image: ez/docker/php
    links:
      - mysql
      - solr
    ports:
     - "80:80"
    volumes:
     - ../../:/var/www/html
    extra_hosts:
     - "localhost:172.20.0.2" # This is not a perfect appproach but needed for the hadrdcoded test hosts in

  mysql:
    image: mysql
    ports:
       - "3306:3306"
    environment:
        MYSQL_ROOT_PASSWORD: root
        MYSQL_DATABASE: root
        MYSQL_USER: ez
        MYSQL_PASSWORD: AAaa11!!

  solr:
    build:
      context: ../../
      dockerfile: ./docker/solr6/Dockerfile
    image: ez/docker/solr
    ports:
      - "8983:8983"
